

# Ad Management


## Installation

1. Install the python dependencies: `pipenv install`
2. Install a local version of the database: `docker compose up --build --remove-orphans -d`
3. Run database migration to have the latest schemas: `alembic upgrade head`
4. Run the app locally: `uvicorn app.main:app --reload`
5. Run the worker locally: `python ad_management_worker.py`

6. Run Tests for the app locally: ` pytest ./app/main_test.py`

## Usage

The easiest way to get started with the api is to head over to the docs generated by fastapi at `localhost:8000/docs`.

1. Create an
   advertisor,
   campaign,
   adgroup,
   ad
   Using the endpoint
     `POST /queues`
2. Add players to the queue using the `POST /players`. Each players can have a set of attributes (for example a rating) that can be used in the cost function.
3. Call the `GET /players/{player_id}` endpoint to get the status of a player. When a player gets a match, its status will have the value `MATCHED`.
4. Using the match id of a player, call the `GET /matches/{match_id}` endpoint to get the list of players in the matching.




```
python3 -m venv fenv

source fenv/bin/activate


pip install pipenv

pipenv install

pipenv install <package> --dev

alembic revision -m "create all tables"

alembic upgrade head

alembic downgrade -1


export PYTHONPATH=$PWD

``